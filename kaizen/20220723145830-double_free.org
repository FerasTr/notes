:PROPERTIES:
:ID:       d5aaabc2-6ccd-4d98-aae5-af31d4183b40
:END:
#+title: Double Free

* Overview
* Copy Constructor
If the [[id:aff0cb9a-73fa-43b3-a7a9-e4aa54ea1fc3][Copy Constructors]] is left to be generated by the compiler, it is possible to get a double free bug on the underlying object. For example:
#+begin_src cpp
struct Request
{
    char *str;
    uint64_t result;

    Request(char *str, int result) : str(strdup(str)), result(result) {}
    ~Request() { free(str); }
};
#+end_src
Since the copy constructor isn't deleted. If we can double free a ~Request~ object, its backing ~char *str~ will also get double freed.

* Resources
- how-to-exploit-a-double-free ([[https://github.com/stong/how-to-exploit-a-double-free][link]])
